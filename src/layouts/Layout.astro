---
// src/layouts/Layout.astro
import '../styles/global.css'; // This imports your styles and theme!

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>{title}</title>

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@300;400;500&display=swap"
			rel="stylesheet"
		/>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
		/>
	</head>
	<body>
		<div
			class="fixed inset-0 z-[-2] bg-cover bg-center bg-no-repeat"
			style="background-image: url('/img/heroimg.jpg')"
		>
		</div>
		<div class="fixed inset-0 z-[-1] bg-black/60"></div>

		<nav
			id="navbar"
			class="sticky top-0 z-50 py-4 text-white transition-all duration-300"
		>
			<div class="container mx-auto flex items-center justify-between px-4">
				<a href="#" class="font-heading text-3xl">Kape Dadiangas</a>
				<button
					class="navbar-toggler lg:hidden"
					type="button"
					aria-label="Toggle navigation"
				>
					<span class="navbar-toggler-icon"></span>
				</button>
				<ul class="hidden gap-6 lg:flex">
					<li>
						<a
							href="#about"
							class="text-lg font-medium text-white/90 transition-colors hover:text-primary"
							>About</a
						>
					</li>
					<li>
						<a
							href="#menu"
							class="text-lg font-medium text-white/90 transition-colors hover:text-primary"
							>Menu</a
						>
					</li>
					<li>
						<a
							href="#gallery"
							class="text-lg font-medium text-white/90 transition-colors hover:text-primary"
							>Gallery</a
						>
					</li>
					<li>
						<a
							href="#contact"
							class="text-lg font-medium text-white/90 transition-colors hover:text-primary"
							>Contact</a
						>
					</li>
				</ul>
			</div>
		</nav>

		<main>
			<slot />
		</main>

		<footer class="bg-[#111] py-16 text-center text-white">
			<div class="container mx-auto px-4">
				<p class="font-heading text-3xl">Kape Dadiangas</p>
				<div class="my-6 flex justify-center gap-6">
					<a
						href="#"
						class="text-3xl text-white transition-colors hover:text-primary"
						><i class="bi bi-facebook"></i></a
					>
					<a
						href="#"
						class="text-3xl text-white transition-colors hover:text-primary"
						><i class="bi bi-instagram"></i></a
					>
					<a
						href="#"
						class="text-3xl text-white transition-colors hover:text-primary"
						><i class="bi bi-twitter-x"></i></a
					>
				</div>
				<p class="mb-0">Â© 2025 Mark Wyndl Tan Divinagracia. All Rights Reserved.</p>
				<p class="mb-0">This is a demo site for portfolio purposes only.</p>
			</div>
		</footer>

		<script>
			// 1. Navbar style change on scroll
			const navbar = document.getElementById('navbar');
			if (navbar) {
				window.addEventListener('scroll', () => {
					if (window.scrollY > 50) {
						// This replaces the .scrolled class
						navbar.classList.add('bg-gray-900/80', 'shadow-lg', 'backdrop-blur-md');
					} else {
						navbar.classList.remove('bg-gray-900/80', 'shadow-lg', 'backdrop-blur-md');
					}
				});
			}

			// 2. Fade-in animation on scroll
			const observer = new IntersectionObserver(
				(entries) => {
					entries.forEach((entry) => {
						if (entry.isIntersecting) {
							entry.target.classList.add('is-visible');
						}
					});
				},
				{
					threshold: 0.1,
				}
			);

			const sectionsToFade = document.querySelectorAll('.fade-in-section');
			sectionsToFade.forEach((section) => {
				observer.observe(section);
			});
		</script>
		<style is:global>
			.fade-in-section {
				opacity: 0;
				transform: translateY(20px);
				transition:
					opacity 0.6s ease-out,
					transform 0.6s ease-out;
			}
			.fade-in-section.is-visible {
				opacity: 1;
				transform: translateY(0);
			}
		</style>
	</body>
</html>